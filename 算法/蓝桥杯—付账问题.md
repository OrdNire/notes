原题链接：[付账问题](https://www.acwing.com/problem/content/description/1237/)

### 题目描述

几个人一起出去吃饭是常有的事。

但在结帐的时候，常常会出现一些争执。

现在有 $n$ 个人出去吃饭，他们总共消费了 $S$ 元。

其中第 $i$ 个人带了 $ai$ 元。

幸运的是，所有人带的钱的总数是足够付账的，但现在问题来了：每个人分别要出多少钱呢？

为了公平起见，我们希望在总付钱量恰好为 $S$ 的前提下，最后每个人付的钱的标准差最小。

这里我们约定，每个人支付的钱数可以是任意非负实数，即可以不是 $1$ 分钱的整数倍。

你需要输出最小的标准差是多少。

标准差的介绍：标准差是多个数与它们平均数差值的平方平均数，一般用于刻画这些数之间的“偏差有多大”。

形式化地说，设第 $i$ 个人付的钱为 $bi$ 元，那么标准差为 : 

![付账问题](D:\个人资料\Notes\算法\images\付账问题.png)

##### 输入格式

第一行包含两个整数 $n、S；$

第二行包含 $n$ 个非负整数 $a_1, …, a_n。$

##### 输出格式

输出最小的标准差，四舍五入保留 4 位小数。

#### 数据范围

$1≤n≤5×105,$
$0≤ai,S≤109$

##### 输入样例1：

```
5 2333
666 666 666 666 666
```

##### 输出样例1：

```
0.0000
```

##### 输入样例2：

```
10 30
2 1 4 7 4 8 3 6 4 7
```

##### 输出样例2：

```
0.7928
```



### 思路

贪心策略：

记 $bi$ 为应付的钱数，$a_i$ 为持有的钱数，$avg$ 为平均值

**当付的钱越接近平均值时，标准差就越小**

- 如果 $a_i < avg$ ，那么 $b_i = a_i$ ，即如果钱不够平均值，就将持有的钱都付了，不够的钱均摊给其余的人
- 如果 $a_i ≥ avg$，那么 $b_i = avg$，即付平均值

首先先排序，然后枚举每个人应该付的钱，每当一个人付完后，这个人付的钱就已经确定了，那么后面的其它人需要接近的平均值就是 $(s - a_1) / n - 1$，依次类推，直到算出所有人应该付的钱

#### 时间复杂度

$O(nlogn)$

#### C++ 代码
```cpp
#include <iostream>
#include <algorithm>
#include <cmath>
using namespace std;

const int N = 500010;
int a[N];
int n;
double s;

int main()
{
    scanf("%d%lf",&n,&s);
    
    for(int i = 0;i < n;i ++) scanf("%d",&a[i]);
    sort(a,a + n);
    
    double res = 0, avg = s / n;
    for(int i = 0;i < n;i ++) {
        double cur = s / (n - i);
        if(a[i] < cur) cur = a[i];
        res += (cur - avg) * (cur - avg);
        s -= cur;
    }
    
    printf("%.4f",sqrt(res / n));
    return 0;
}
```

----------


